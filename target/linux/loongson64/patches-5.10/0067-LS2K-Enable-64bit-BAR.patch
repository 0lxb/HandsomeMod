From 177c9c731e9a3a4f15e1e456be23ddb01dec0be9 Mon Sep 17 00:00:00 2001
From: Jiaxun Yang <jiaxun.yang@flygoat.com>
Date: Sun, 14 Jun 2020 17:53:27 +0800
Subject: [PATCH 67/81] LS2K: Enable 64bit BAR

Required by AMDGPU

Signed-off-by: Jiaxun Yang <jiaxun.yang@flygoat.com>
---
 arch/mips/boot/dts/loongson/loongson2k.dts | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/arch/mips/boot/dts/loongson/loongson2k.dts b/arch/mips/boot/dts/loongson/loongson2k.dts
index a32b50f499..62a29411d9 100644
--- a/arch/mips/boot/dts/loongson/loongson2k.dts
+++ b/arch/mips/boot/dts/loongson/loongson2k.dts
@@ -29,7 +29,8 @@ package0: bus@10000000 {
 		#size-cells = <2>;
 		ranges = <0 0x10000000 0 0x10000000 0 0x10000000
 			0 0x40000000 0 0x40000000 0 0x40000000
-			0xfe 0x00000000 0xfe 0x00000000 0 0x40000000>;
+			0x40 0x00000000 0x40 0x00000000 0x10 0x00000000
+			0xfe 0x00000000 0xfe 0x00000000 0 0x20000000>;
 
 		uart0: serial@1fe00000 {
 			compatible = "ns16550a";
@@ -160,8 +161,9 @@ pci@1a000000 {
 			reg = <0 0x1a000000 0 0x02000000>,
 				<0xfe 0x00000000 0 0x20000000>;
 
-			ranges = <0x01000000 0x0 0x00000000 0x0 0x18000000  0x0 0x00010000>,
-					<0x02000000 0x0 0x40000000 0x0 0x40000000  0x0 0x40000000>;
+			ranges = <0x81000000 0x0 0x00000000 0x0 0x18000000  0x0 0x00010000>,
+					<0x82000000 0x0 0x40000000 0x0 0x40000000  0x0 0x40000000>,
+					<0xc2000000 0x40 0x00000000 0x40 0x00000000 0x10 0x00000000>;
 
 			gmac0: gmac@3,0 {
 				compatible = "pci0014,7a03.0",
-- 
2.31.1

